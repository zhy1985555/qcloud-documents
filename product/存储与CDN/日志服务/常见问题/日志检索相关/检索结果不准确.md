使用检索分析时，可能会遇到查询结果与业务日志明显不一致或“图表分析”内结果与日志条数不一致的现象，这往往是由于索引配置发生变更导致的，几种典型的情况如下：

### 检索日志时，某一时间段日志数量为0，但该时间段实际上是有日志，怎么办？

通过`demokey:value`的形式检索日志时，在日志数量条形图中发现某一时间段的日志数量为0，而实际上应当是有日志的，可通过如下方式排查：
1. 使用空白检索语句查询日志，观察该时间段是否有日志。
 - 否，可能是日志未成功采集，请参考 [检索不到日志](https://cloud.tencent.com/document/product/614/48259#.E7.A1.AE.E8.AE.A4.E6.97.A5.E5.BF.97.E9.87.87.E9.9B.86.E6.98.AF.E5.90.A6.E6.88.90.E5.8A.9F) 进行排查。
 - 是，请执行下一步。
2. 前往 [检索分析](https://console.cloud.tencent.com/cls/search)，单击**索引配置**，在侧边栏底部查看索引配置的最近修改时间。
![](https://main.qcloudimg.com/raw/2ce65042e16b878e0ef1ee05c35f011c.png)
 - 若修改时间在查询时间范围内，请执行下一步。
 - 若修改时间不在查询时间范围内，请参考 [语法与规则](https://cloud.tencent.com/document/product/614/47044) 排查检索语句语法是否存在问题。若问题仍存在，请联系 [在线客服](https://cloud.tencent.com/online-service?from=doc_614)。
3. 日志查询时间范围内发生过索引配置变更时，新的索引配置仅针对之后采集的日志生效。如果您在索引配置中新添加了一个字段，使用该字段进行检索时查询不到修改索引配置之前的日志，而未发生变化的字段仍能检索索引配置变更前后的日志。


### 在分析语句中通过 count(\*) 函数获得的日志条数与日志数量不一致，怎么办？

通过分析语句统计日志条数时，即使分析语句内不存在 where 之类的过滤条件，得到的日志条数也和实际日志数量不一致，例如`* | select count(*) as log_counts`，可通过如下方式排查：
1. 前往 [检索分析](https://console.cloud.tencent.com/cls/search)，单击**索引配置**，在侧边栏底部查看索引配置的最近修改时间。
![](https://main.qcloudimg.com/raw/2ce65042e16b878e0ef1ee05c35f011c.png)
 - 若修改时间在查询时间范围内，请执行下一步。
 - 若修改时间不在查询时间范围内，请参考 [分析简介](https://cloud.tencent.com/document/product/614/44061) 排查分析语句语法是否存在问题。若问题仍存在，请联系 [在线客服](https://cloud.tencent.com/online-service?from=doc_614)。
2. 日志查询时间范围内发生过索引配置变更时，新的索引配置仅针对之后采集的日志生效，分析语句中所有的字段也只针对之后采集的日志生效，因此实际统计的数据时间范围会小于您选择的时间范围。


### 分析语句执行结果不符合实际业务情况，怎么办？

通过分析语句统计日志数据时，统计结果明显不符合实际业务情况，例如统计 PV，实际的 PV 应该在100万左右，但统计到的结果只有几万，可通过如下方式排查：

1. 前往 [检索分析](https://console.cloud.tencent.com/cls/search)，单击**索引配置**，在侧边栏底部查看索引配置的最近修改时间。
![](https://main.qcloudimg.com/raw/2ce65042e16b878e0ef1ee05c35f011c.png)
 - 若修改时间在查询时间范围内，请执行下一步。
 - 若修改时间不在查询时间范围内，请参考 [分析简介](https://cloud.tencent.com/document/product/614/44061) 排查分析语句语法是否存在问题。若问题仍存在，请联系 [在线客服](https://cloud.tencent.com/online-service?from=doc_614)。
2. 日志查询时间范围内发生过索引配置变更时，新的索引配置仅针对之后采集的日志生效，分析语句中所有的字段也只针对之后采集的日志生效，因此实际统计的数据时间范围会小于您选择的时间范围。
